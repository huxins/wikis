(window.webpackJsonp=window.webpackJsonp||[]).push([[121],{402:function(a,t,s){"use strict";s.r(t);var e=s(14),r=Object(e.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"start"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#start"}},[a._v("#")]),a._v(" start")]),a._v(" "),t("p",[a._v("查看网卡类型")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("lspci "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("grep")]),a._v(" Ethernet\n")])])]),t("h2",{attrs:{id:"dns"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dns"}},[a._v("#")]),a._v(" dns")]),a._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://kb.adguard.com/en/general/dns-providers",target:"_blank",rel:"noopener noreferrer"}},[a._v("Known DNS Providers"),t("OutboundLink")],1)])]),a._v(" "),t("h3",{attrs:{id:"dns-tcp"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dns-tcp"}},[a._v("#")]),a._v(" dns tcp")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("vi")]),a._v(" /etc/resolv.conf\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#添加 DNS over TCP")]),a._v("\noptions use-vc\nnameserver "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("8.8")]),a._v(".8.8\nnameserver "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("8.8")]),a._v(".4.4\n")])])]),t("h3",{attrs:{id:"dns-over-tls"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dns-over-tls"}},[a._v("#")]),a._v(" dns over tls")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" getdns-utils\n")])])]),t("p",[a._v("getdns_query 使用 -L 参数指定通过 TLS 进行查询，TLS 查询缺省连接 853 端口；使用 -m 参数表示校验证书和请求域名匹配；使用 -s 参数表示采用 stub 解析模式，而非缺省的递归查询")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ getdns_query @115.159.131.230~dns.rubyfish.cn "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-m")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-s")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-L")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" www.google.com\n$ getdns_query @47.96.179.163~dns.rubyfish.cn "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-m")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-s")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-L")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-A")]),a._v(" www.google.com\n")])])]),t("h3",{attrs:{id:"dns-over-https"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dns-over-https"}},[a._v("#")]),a._v(" dns over https")]),a._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://github.com/curl/curl/wiki/DNS-over-HTTPS",target:"_blank",rel:"noopener noreferrer"}},[a._v("DNS-over-HTTPS"),t("OutboundLink")],1)])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# https://dns.google.com/resolve?name=bnxb.com&type=a")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# https://1.1.1.1/dns-query?ct=application/dns-json&name=bnxb.com&type=A")]),a._v("\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("curl")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-H")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'accept: application/dns-json'")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'https://rubyfish.cn/dns-query?name=www.google.com&type=A'")]),a._v("\n")])])]),t("p",[a._v("上述这种简单的 json 响应只是 "),t("a",{attrs:{href:"https://developers.google.com/speed/public-dns/docs/doh/json",target:"_blank",rel:"noopener noreferrer"}},[a._v("Google/Mozilla 的实现方案"),t("OutboundLink")],1),a._v("。")]),a._v(" "),t("p",[a._v("IETF 提出的"),t("a",{attrs:{href:"https://tools.ietf.org/html/rfc8484",target:"_blank",rel:"noopener noreferrer"}},[a._v("标准化方案"),t("OutboundLink")],1),a._v("要比 web 原生的 json 格式更复杂一些，在 HTTP 流中包装了 DNS 原始的消息。Facebook 的工程师提供了一个基于 Python3.5+ 的工具 doh-proxy，通过 pip 安装的方法")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" python3-pip python3-setuptools python3-wheel\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-H")]),a._v(" pip3 "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" doh-proxy\n")])])]),t("p",[a._v("安装后使用 doh-client 命令进行查询，--domain 参数指定 DoH 服务器，--qname 指定查询的域名")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("$ doh-client "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--domain")]),a._v(" dns.rubyfish.cn "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--qname")]),a._v(" www.facebook.com "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--qtype")]),a._v(" A\n")])])]),t("h2",{attrs:{id:"network-test"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#network-test"}},[a._v("#")]),a._v(" network test")]),a._v(" "),t("h3",{attrs:{id:"speed-test"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#speed-test"}},[a._v("#")]),a._v(" speed test")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("curl")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-fsSLo")]),a._v(" speedtest-cli https://raw.githubusercontent.com/sivel/speedtest-cli/master/speedtest.py\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("chmod")]),a._v(" +x speedtest-cli\n")])])]),t("h3",{attrs:{id:"web-speed-test"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#web-speed-test"}},[a._v("#")]),a._v(" web speed test")]),a._v(" "),t("div",{staticClass:"language-http extra-class"},[t("pre",{pre:!0,attrs:{class:"language-http"}},[t("code",[t("span",{pre:!0,attrs:{class:"token header"}},[t("span",{pre:!0,attrs:{class:"token header-name keyword"}},[a._v("http")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token header-value"}},[a._v("//mybroadbandspeed.speedtestcustom.com/")])]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token header"}},[t("span",{pre:!0,attrs:{class:"token header-name keyword"}},[a._v("http")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token header-value"}},[a._v("//aaaaaa.speedtestcustom.com/")])]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token header"}},[t("span",{pre:!0,attrs:{class:"token header-name keyword"}},[a._v("http")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token header-value"}},[a._v("//rixcloud.speedtestcustom.com/")])]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token header"}},[t("span",{pre:!0,attrs:{class:"token header-name keyword"}},[a._v("http")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token header-value"}},[a._v("//cordcloud.speedtestcustom.com/")])]),a._v("\n")])])]),t("h3",{attrs:{id:"ip-address"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ip-address"}},[a._v("#")]),a._v(" ip address")]),a._v(" "),t("div",{staticClass:"language-http extra-class"},[t("pre",{pre:!0,attrs:{class:"language-http"}},[t("code",[t("span",{pre:!0,attrs:{class:"token header"}},[t("span",{pre:!0,attrs:{class:"token header-name keyword"}},[a._v("http")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token header-value"}},[a._v("//ip100.info/")])]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token header"}},[t("span",{pre:!0,attrs:{class:"token header-name keyword"}},[a._v("http")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token header-value"}},[a._v("//ip111.cn/")])]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token header"}},[t("span",{pre:!0,attrs:{class:"token header-name keyword"}},[a._v("https")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token header-value"}},[a._v("//ip.skk.moe/")])]),a._v("\n")])])]),t("h3",{attrs:{id:"generate-204"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#generate-204"}},[a._v("#")]),a._v(" generate_204")]),a._v(" "),t("div",{staticClass:"language-http extra-class"},[t("pre",{pre:!0,attrs:{class:"language-http"}},[t("code",[t("span",{pre:!0,attrs:{class:"token header"}},[t("span",{pre:!0,attrs:{class:"token header-name keyword"}},[a._v("http")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token header-value"}},[a._v("//204.ustclug.org")])]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token header"}},[t("span",{pre:!0,attrs:{class:"token header-name keyword"}},[a._v("http")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token header-value"}},[a._v("//connect.rom.miui.com/generate_204")])]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token header"}},[t("span",{pre:!0,attrs:{class:"token header-name keyword"}},[a._v("http")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token header-value"}},[a._v("//connectivitycheck.platform.hicloud.com/generate_204")])]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token header"}},[t("span",{pre:!0,attrs:{class:"token header-name keyword"}},[a._v("http")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token header-value"}},[a._v("//wifi.vivo.com.cn/generate_204")])]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token header"}},[t("span",{pre:!0,attrs:{class:"token header-name keyword"}},[a._v("http")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token header-value"}},[a._v("//www.gstatic.com/generate_204")])]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token header"}},[t("span",{pre:!0,attrs:{class:"token header-name keyword"}},[a._v("http")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token header-value"}},[a._v("//www.g.cn/generate_204")])]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token header"}},[t("span",{pre:!0,attrs:{class:"token header-name keyword"}},[a._v("http")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token header-value"}},[a._v("//www.msftconnecttest.com/connecttest.txt")])]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token header"}},[t("span",{pre:!0,attrs:{class:"token header-name keyword"}},[a._v("http")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token header-value"}},[a._v("//captive.apple.com")])]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token header"}},[t("span",{pre:!0,attrs:{class:"token header-name keyword"}},[a._v("http")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token header-value"}},[a._v("//detectportal.firefox.com/success.txt")])]),a._v("\n")])])])])}),[],!1,null,null,null);t.default=r.exports}}]);