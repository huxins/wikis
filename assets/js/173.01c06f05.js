(window.webpackJsonp=window.webpackJsonp||[]).push([[173],{453:function(a,t,s){"use strict";s.r(t);var r=s(14),e=Object(r.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"adb"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#adb"}},[a._v("#")]),a._v(" adb")]),a._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://developer.android.com/studio/command-line/adb",target:"_blank",rel:"noopener noreferrer"}},[a._v("Android 调试桥"),t("OutboundLink")],1)]),a._v(" "),t("li",[t("a",{attrs:{href:"https://developer.android.com/studio/releases/platform-tools",target:"_blank",rel:"noopener noreferrer"}},[a._v("SDK Platform Tools"),t("OutboundLink")],1)]),a._v(" "),t("li",[t("a",{attrs:{href:"https://github.com/mzlogin/awesome-adb",target:"_blank",rel:"noopener noreferrer"}},[a._v("awesome-adb"),t("OutboundLink")],1)])]),a._v(" "),t("h2",{attrs:{id:"基本用法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#基本用法"}},[a._v("#")]),a._v(" 基本用法")]),a._v(" "),t("h3",{attrs:{id:"命令语法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#命令语法"}},[a._v("#")]),a._v(" 命令语法")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[a._v("adb "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-d"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("-e"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("-s "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("serialNumber"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("command"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])])]),t("p",[a._v("如果只有一个设备/模拟器连接时，可以省略掉 "),t("code",[a._v("[-d|-e|-s <serialNumber>]")]),a._v(" 这一部分，直接使用 "),t("code",[a._v("adb <command>")]),a._v("。")]),a._v(" "),t("h3",{attrs:{id:"为命令指定目标设备"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#为命令指定目标设备"}},[a._v("#")]),a._v(" 为命令指定目标设备")]),a._v(" "),t("p",[a._v("如果有多个设备/模拟器连接，则需要为命令指定目标设备。")]),a._v(" "),t("table",[t("thead",[t("tr",[t("th",[a._v("参数")]),a._v(" "),t("th",[a._v("含义")])])]),a._v(" "),t("tbody",[t("tr",[t("td",[a._v("-d")]),a._v(" "),t("td",[a._v("指定当前唯一通过 USB 连接的 Android 设备为命令目标")])]),a._v(" "),t("tr",[t("td",[a._v("-e")]),a._v(" "),t("td",[a._v("指定当前唯一运行的模拟器为命令目标")])]),a._v(" "),t("tr",[t("td",[t("code",[a._v("-s <serialNumber>")])]),a._v(" "),t("td",[a._v("指定相应 serialNumber 号的设备/模拟器为命令目标")])])])]),a._v(" "),t("h3",{attrs:{id:"启动-停止"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动-停止"}},[a._v("#")]),a._v(" 启动/停止")]),a._v(" "),t("p",[a._v("启动 adb server 命令：")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[a._v("adb start-server\n")])])]),t("p",[a._v("停止 adb server 命令：")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[a._v("adb kill-server\n")])])]),t("h3",{attrs:{id:"查看-adb-版本"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看-adb-版本"}},[a._v("#")]),a._v(" 查看 adb 版本")]),a._v(" "),t("p",[a._v("命令：")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[a._v("adb version\n")])])]),t("h3",{attrs:{id:"以-root-权限运行-adbd"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#以-root-权限运行-adbd"}},[a._v("#")]),a._v(" 以 root 权限运行 adbd")]),a._v(" "),t("p",[a._v("让 adbd 以 root 权限执行命令：")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[a._v("adb root\n")])])]),t("p",[a._v("让 adbd 为非 root 权限执行命令：")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[a._v("adb unroot\n")])])]),t("h3",{attrs:{id:"指定-adb-server-的网络端口"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#指定-adb-server-的网络端口"}},[a._v("#")]),a._v(" 指定 adb server 的网络端口")]),a._v(" "),t("p",[a._v("命令：")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[a._v("adb "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-P")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("port"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" start-server\n")])])]),t("p",[a._v("默认端口为 5037。")]),a._v(" "),t("h2",{attrs:{id:"设备连接管理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#设备连接管理"}},[a._v("#")]),a._v(" 设备连接管理")]),a._v(" "),t("h3",{attrs:{id:"查询已连接设备-模拟器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查询已连接设备-模拟器"}},[a._v("#")]),a._v(" 查询已连接设备/模拟器")]),a._v(" "),t("p",[a._v("命令：")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[a._v("adb devices\n")])])]),t("p",[a._v("需要查询具体设备信息时，可使用 "),t("code",[a._v("-l")]),a._v(" 参数。")]),a._v(" "),t("h3",{attrs:{id:"usb-连接"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#usb-连接"}},[a._v("#")]),a._v(" USB 连接")]),a._v(" "),t("p",[a._v("通过 USB 连接来正常使用 adb 需要保证几点：")]),a._v(" "),t("ol",[t("li",[t("p",[a._v("硬件状态正常。")])]),a._v(" "),t("li",[t("p",[a._v("Android 设备的开发者选项和 USB 调试模式已开启。")])]),a._v(" "),t("li",[t("p",[a._v("设备驱动状态正常。")])]),a._v(" "),t("li",[t("p",[a._v("通过 USB 线连接好电脑和设备后确认状态。")])])]),a._v(" "),t("h3",{attrs:{id:"无线连接-android-11-及以上"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#无线连接-android-11-及以上"}},[a._v("#")]),a._v(" 无线连接（Android 11 及以上）")]),a._v(" "),t("p",[a._v("操作步骤：")]),a._v(" "),t("ol",[t("li",[t("p",[a._v("更新到最新版本的 "),t("a",{attrs:{href:"https://developer.android.com/studio/releases/platform-tools",target:"_blank",rel:"noopener noreferrer"}},[a._v("SDK 平台工具"),t("OutboundLink")],1),a._v(" (> 30.0.0)。")])]),a._v(" "),t("li",[t("p",[a._v("Android 设备的开发者选项和无线调试模式已开启。")])]),a._v(" "),t("li",[t("p",[a._v("选择使用配对码配对设备，使用弹窗中的 IP 地址和端口号。")])])]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[a._v("adb pair ipaddr:port\n")])])]),t("ol",{attrs:{start:"4"}},[t("li",[a._v("使用无线调试下的 IP 地址和端口。")])]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[a._v("adb connect ipaddr:port\n")])])]),t("h3",{attrs:{id:"无线连接-android-10-及以下"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#无线连接-android-10-及以下"}},[a._v("#")]),a._v(" 无线连接（Android 10 及以下）")]),a._v(" "),t("h2",{attrs:{id:"应用管理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#应用管理"}},[a._v("#")]),a._v(" 应用管理")]),a._v(" "),t("h3",{attrs:{id:"查看应用列表"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看应用列表"}},[a._v("#")]),a._v(" 查看应用列表")]),a._v(" "),t("p",[a._v("查看应用列表的基本命令格式是")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[a._v("adb shell pm list packages "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-f"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-d"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-e"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-s"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-3"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-i"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-u"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("--user USER_ID"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("FILTER"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])])]),t("p",[a._v("过滤参数如下：")]),a._v(" "),t("table",[t("thead",[t("tr",[t("th",[a._v("参数")]),a._v(" "),t("th",[a._v("显示列表")])])]),a._v(" "),t("tbody",[t("tr",[t("td",[a._v("无")]),a._v(" "),t("td",[a._v("所有应用")])]),a._v(" "),t("tr",[t("td",[a._v("-f")]),a._v(" "),t("td",[a._v("显示应用关联的 apk 文件")])]),a._v(" "),t("tr",[t("td",[a._v("-d")]),a._v(" "),t("td",[a._v("只显示 disabled 的应用")])]),a._v(" "),t("tr",[t("td",[a._v("-e")]),a._v(" "),t("td",[a._v("只显示 enabled 的应用")])]),a._v(" "),t("tr",[t("td",[a._v("-s")]),a._v(" "),t("td",[a._v("只显示系统应用")])]),a._v(" "),t("tr",[t("td",[a._v("-3")]),a._v(" "),t("td",[a._v("只显示第三方应用")])]),a._v(" "),t("tr",[t("td",[a._v("-i")]),a._v(" "),t("td",[a._v("显示应用的 installer")])]),a._v(" "),t("tr",[t("td",[a._v("-u")]),a._v(" "),t("td",[a._v("包含已卸载应用")])]),a._v(" "),t("tr",[t("td",[t("code",[a._v("<FILTER>")])]),a._v(" "),t("td",[a._v("包名包含 "),t("code",[a._v("<FILTER>")]),a._v(" 字符串")])])])]),a._v(" "),t("h3",{attrs:{id:"安装应用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装应用"}},[a._v("#")]),a._v(" 安装应用")]),a._v(" "),t("p",[a._v("命令格式：")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[a._v("adb shell pm "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-lrtsdg"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("path_to_apk"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])])]),t("p",[a._v("可选参数来控制安装行为：")]),a._v(" "),t("table",[t("thead",[t("tr",[t("th",[a._v("参数")]),a._v(" "),t("th",[a._v("含义")])])]),a._v(" "),t("tbody",[t("tr",[t("td",[a._v("-l")]),a._v(" "),t("td",[a._v("将应用安装到保护目录 /mnt/asec")])]),a._v(" "),t("tr",[t("td",[a._v("-r")]),a._v(" "),t("td",[a._v("允许覆盖安装")])]),a._v(" "),t("tr",[t("td",[a._v("-t")]),a._v(" "),t("td",[a._v("允许安装 AndroidManifest.xml 里 application 指定 "),t("code",[a._v('android:testOnly="true"')]),a._v(" 的应用")])]),a._v(" "),t("tr",[t("td",[a._v("-s")]),a._v(" "),t("td",[a._v("将应用安装到 sdcard")])]),a._v(" "),t("tr",[t("td",[a._v("-d")]),a._v(" "),t("td",[a._v("允许降级覆盖安装")])]),a._v(" "),t("tr",[t("td",[a._v("-g")]),a._v(" "),t("td",[a._v("授予所有运行时权限")])])])])])}),[],!1,null,null,null);t.default=e.exports}}]);