(window.webpackJsonp=window.webpackJsonp||[]).push([[203],{483:function(t,a,s){"use strict";s.r(a);var e=s(14),n=Object(e.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"log4j"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#log4j"}},[t._v("#")]),t._v(" log4j")]),t._v(" "),a("p",[t._v("IDEA log path")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("%HomePath%\\.IntelliJIdea2019.1\\system\\tomcat\\project\\logs\n")])])]),a("p",[t._v("log4j 的等级顺序（低到高）： DEBUG < INFO < WARN < ERROR < FATAL")]),t._v(" "),a("div",{staticClass:"language-properties extra-class"},[a("pre",{pre:!0,attrs:{class:"language-properties"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# %d{yyyy-MM-dd HH:mm:ss} %-5p %c{1}:%L - %m%n")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# %p %d{yyyy-MM-dd HH:mm:ss} - %m%n")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("log4j.rootLogger")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("DEBUG,Console")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Redirect log messages to console")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("log4j.appender.Console")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("org.apache.log4j.ConsoleAppender")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#log4j.appender.Console.Target=System.out")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("log4j.appender.Console.layout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("org.apache.log4j.PatternLayout")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("log4j.appender.Console.layout.ConversionPattern")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("%d [%t] %-5p [%c] - %m%n")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("log4j.logger.org.apache")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("INFO")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Redirect log messages to a log file, support file rolling.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("log4j.appender.file")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("org.apache.log4j.RollingFileAppender")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("log4j.appender.file.File")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("${catalina.base}/logs/mes/log4j-application.log")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#log4j.appender.file.Threshold=WARN ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("log4j.appender.file.MaxFileSize")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("5MB")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("log4j.appender.file.MaxBackupIndex")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("10")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("log4j.appender.file.layout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("org.apache.log4j.PatternLayout")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("log4j.appender.file.layout.ConversionPattern")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("%d{yyyy-MM-dd HH:mm:ss} %-5p %c{1}:%L - %m%n")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("log4j.logger.org.springframework.jdbc.core")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("info")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("log4j.logger.org.springframework.jdbc.core.JdbcTemplate")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("info")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("log4j.logger.org.springframework.jdbc.core.StatementCreatorUtils")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("info, file")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("log4j.logger.java.sql")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("info")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("log4j.logger.java.sql.Connection")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("info")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("log4j.logger.java.sql.Statement")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("info")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("log4j.logger.java.sql.PreparedStatement")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("info, fileout")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("log4j.logger.java.sql.ResultSet")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("info")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 每日")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("log4j.logger.wslogfile")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("INFO,wslogfile")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("log4j.appender.wslogfile")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("org.apache.log4j.DailyRollingFileAppender")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("log4j.appender.wslogfile.File")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("${catalina.base}/logs/wslogs/wslog.log")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("log4j.appender.wslogfile.DatePattern")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("yyyy-MM-dd'.log'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("log4j.appender.wslogfile.Encoding")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("UTF-8")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("log4j.appender.wslogfile.layout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("org.apache.log4j.PatternLayout")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("log4j.appender.wslogfile.layout.ConversionPattern")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("%t %p %d{yyyy-MM-dd HH:mm:ss:SSS} - %m%n")]),t._v("\n")])])]),a("p",[t._v("Java")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//建立Logger的一个实例，命名为“com.foo”")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Logger")]),t._v(" logger "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Logger")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getLogger")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"com.foo"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('//"com.foo"是实例进行命名，也可以任意')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//设置logger的级别。通常不在程序中设置logger的级别。一般在配置文件中设置。")]),t._v("\nlogger"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setLevel")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Level")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("INFO")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Logger")]),t._v(" barlogger "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Logger")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getLogger")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"com.foo.Bar"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//下面这个请求可用，因为WARN >= INFO")]),t._v("\nlogger"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("warn")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Low fuel level."')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//下面这个请求不可用，因为DEBUG < INFO")]),t._v("\nlogger"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("debug")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Starting search for nearest gas station."')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//命名为“com.foo.bar”的实例barlogger会继承实例“com.foo”的级别。因此，下面这个请求可用，因为INFO >= INFO")]),t._v("\nbarlogger"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("info")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Located nearest gas station."')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//下面这个请求不可用，因为DEBUG < INFO")]),t._v("\nbarlogger"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("debug")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Exiting gas station search"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h2",{attrs:{id:"appenders"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#appenders"}},[t._v("#")]),t._v(" appenders")]),t._v(" "),a("p",[t._v("禁用与使用日志请求只是Log4j其中的一个小小的地方，Log4j日志系统允许把日志输出到不同的地方，如控制台（Console）、文件（Files），根据天数或者文件大小产生新的文件，以流的形式发送到其它地方，异步记录日志等等。")]),t._v(" "),a("ol",[a("li",[t._v("定义：appender其实就是输出源(output destination, target, endpoint)。可以是终端、文件、图形界面、远程socket服务、JMS、邮件等。还支持日志的异步写入。")]),t._v(" "),a("li",[t._v("一个 logger 可以有一个或多个 appender，即日志可以同时记录到多个地方。通过"),a("span",{staticStyle:{color:"red"}},[t._v("logger.addAppender(Appender newAppender)")]),t._v(" 方法将 appender 添加到指定的 logger。")]),t._v(" "),a("li",[t._v("每一个发送给logger的合法（即没有被logger等级过滤掉）日志请求都会发送到该logger关联的每一个appenders和该logger的每一个父logger的appender。换一种说法就是logger会继承父 logger 的appender。可以通过设置 additivity=false 取消。")])])])}),[],!1,null,null,null);a.default=n.exports}}]);